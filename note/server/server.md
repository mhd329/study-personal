# 서버 기초

<br>

## 목차

<br>

[1. 인터넷이란?]()

> [1-1. 인터넷의 동작 원리]()
>
> [1-2. IP와 domain]()

[2. 클라이언트](#2-클라이언트)

> [2-1. 동작 과정](#2-1-동작-과정)
>
> [2-2. 패킷이란?](#2-2-패킷이란?)

[3. 서버](#3-서버)

> [3-1. HTTP](#3-1-HTTP)
>
> > [3-1-1. HTTP 의 기초적인 사항들](#3-1-1-HTTP-의-기초적인-사항들)
> >
> > [3-1-2. HTTP 로 제어할 수 있는 것](#3-1-2-HTTP-로-제어할-수-있는-것)
> >
> > [3-1-3. HTTP 흐름](#3-1-3-HTTP-흐름)
> >
> > [3-1-4. HTTP 메세지](#3-1-4-HTTP-메세지)
>
> [3-2. 웹 서버의 특징 및 종류](#3-2-웹-서버의-특징-및-종류)
>
> [3-3. 클라이언트 측 프로그래밍](#3-3-클라이언트-측-프로그래밍)
>
> [3-4. 서버 측 프로그래밍](#3-4-서버-측-프로그래밍)



<br>

## 1. 인터넷이란?

<br>

- 인터넷과 웹
  - 인터넷은 수 많은 컴퓨터들을 연결하는 기술
  - 웹은 그 기술 인프라 위에 구축된 서비스
    - 다른 서비스로 이메일, IRC 등이 있다.

<br>

### 1-1. 인터넷의 동작 원리

<br>

- 컴퓨터들은  서로 통신이 가능하다.
- 인터넷의 구성
  - 두 개 이상의 컴퓨터가 서로 통신할 때에는 서로 물리적으로 연결이 되어 있어야 한다.
    - 이더넷 케이블
    - 무선
      - WiFi
      - Bluetooth
  - 여러 컴퓨터들이 모든 컴퓨터들과 각각 연결되려면 연결망이 너무 복잡해진다.
  - 네트워크의 각 컴퓨터는 라우터 라고 하는 특수한 소형 컴퓨터에 연결된다.
    - 신호 전송의 중계기 역할을 한다.
    - 라우터 단위의 연결을 확장하여 더 큰 연결 집단을 만들 수 있다.
  - 더 거대하고 넓은 연결망을 구축하기 위해 전화 연결망과 네트워크를 연결할 수 있다.
    - 네트워크에 정보를 보내기 위해 연결망을 관리하는 회사 ( ISP : Internet Service Provider ) 에 네트워크를 연결한다.
    - 정보는 ISP 의 네트워크를 통해 대상 네트워크로 전달된다.

<br>

### 1-2. IP와 domain

<br>

- 어떤 컴퓨터가 다른 컴퓨터에 메세지를 보내려면 그 컴퓨터를 지정해야 한다.
- 지정할 때 어떤 주소를 알려줌으로써 도착지를 지정하게 된다.
  - IP 는 네트워크에 연결된 모든 컴퓨터마다 개별적으로 부여되는 고유 주소이다.
  - 네 개의 세자리 수가 점으로 구분되는 형태이다.
    - `192.168.x.x`
- IP 주소는 사용자가 기억하기 어렵기 때문에 사람이 기억하기 쉬운 형태로 주소를 재가공 한다.
  - `173.194.121.32` 이러한 숫자로 된 IP 주소는,
  - `google.com` 라는 도메인 이름으로 가공되어 우리에게 제공된다.

<br>

[위로 가기](#목차)

<br>

## 2. 클라이언트

<br>

- 웹에 연결된 컴퓨터는 클라이언트와 서버라고 한다.
  - 클라이언트는 일반적으로 웹 브라우저이다.
  - 서버는 웹 브라우저가 가져올 웹 페이지가 저장되어있는 컴퓨터이다.
  - 클라이언트는 서버로부터 웹 페이지의 사본을 받아온다.
- 기본적인 내용들
  - TCP/IP
    - Transmission Control Protocol ( 전송 제어 규약 )
    - Internet Protocol ( 인터넷 규약 )
    - 데이터가 어떻게 웹에서 이동해야 하는지 정의하는 통신 규약
    - 데이터 운송 장치와 같다.
  - DNS
    - Domain Name System Servers ( 도메인 이름 시스템 서버 )
    - 브라우저의 웹 사이트 주소록
    - 브라우저는 웹 사이트를 검색하기 전에 DNS 를 조회한다.
  - HTTP
    - Hypertext Transfer Protocol ( 하이퍼텍스트 전송 규약 )
    - 클라이언트와 서버가 서로 통신할 수 있게 하는 언어를 정의하는 규약
  - 컴포넌트 파일
    - 코드 파일
      - HTML
      - CSS
      - JavaScript
    - 자원
      - 문서, 이미지, 비디오, 음악 등 웹 사이트를 이루는 요소들

<br>

### 2-1. 동작 과정

<br>

1. 브라우저는 DNS 서버로 가서 웹 사이트가 있는 서버의 IP 주소를 찾는다.
2. 브라우저는 TCP/IP 연결을 통해서, 서버로 웹 사이트의 사본을 달라는 HTTP 요청을 보낸다.
3. 서버는 요청을 승인하고 숫자 200 을 보낸다.
   1. [응답 코드](https://dev.opera.com/articles/http-response-codes/) 200 은 허용되었다는 의미이다.
   2. 서버는 웹 사이트의 파일들을 데이터 패킷이라는 작은 덩어리들로 브라우저에 전송한다.
4. 브라우저는 데이터 패킷 덩어리들을 완전한 웹 사이트들로 조립하고 사용자에게 보여준다.

<br>

### 2-2. 패킷이란?

<br>

- 데이터가 웹을 거쳐서 전송될 때, 수 많은 작은 단위로 잘개 쪼개져서 보내진다.
- 여러 사용자가 웹을 동시에 이용할 수 있게 만드는 기술이다.

<br>

[위로 가기](#목차)

<br>

## 3. 서버

<br>

- 하드웨어적 동작
  - 웹 서버의 소프트웨어와 웹 사이트의 컴포넌트 파일들을 저장하는 컴퓨터
  - 인터넷에 연결되어서 웹에 연결된 다른 기기들이 웹 서버의 데이터들을 주고받을 수 있도록 한다.
- 소프트웨어적 동작
  - 웹 사용자가 어떻게 호스트 파일들에 접근하는지를 관리한다.
  - HTTP 서버
    - URL 과 HTTP 소프트웨어의 일부이다.
- 브라우저는 HTTP 를 통해 파일을 요청한다.
- 요청이 올바른 웹 서버에 도달했을 때 HTTP 서버는 파일을 HTTP 를 통해 보내준다.

<br>

### 3-1. HTTP

<br>

- HTML 문서와 같은 리소스들을 가져올 수 있도록 해주는 프로토콜
- 클라이언트와 서버간의 프로토콜이다.
  - request 와 response 의 교환이다.
- 요청과 응답 사이에는 게이트웨이, 프록시 등 다양한 개체들이 있다.
- 클라이언트
  - 브라우저
    - 사용자 대신 모든 동작을 수행하는 도구
    - 항상 요청을 보내는 개체
      - 결코 서버가 될 수 없다.
  - 서버
  - 프록시
    - HTTP 의 애플리케이션 계층에서 동작하는 컴퓨터 혹은 머신
    - 다양한 기능들을 수행할 수 있다.
      - 캐싱
        - 캐시는 공개 또는 비공개 할 수 있다.
      - 필터링
        - 바이러스 백신 스캔, 유해 컨텐츠 차단
      - 로드 밸런싱
        - 여러 서버들이 서로 다른 요청을 처리하도록 허용
      - 인증
        - 다양한 리소스에 대한 접근 제어
      - 로깅
        - 이력 정보를 저장

<br>

#### 3-1-1. HTTP 의 기초적인 사항들

<br>

- HTTP 는 사람이 읽을 수 있어야 한다.
- HTTP 는 확장 가능하다.
  - HTTP 헤더는 HTTP 를 확장할 수 있게 해준다.
  - 확장 시 클라이언트와 서버가 헤더의 새로운 시맨틱에 대해 합의가 필요하다.
- HTTP 는 상태를 저장하지 않는다.
  - HTTP 쿠키는 상태가 있는 세션을 만들수 있게 해준다.
- HTTP 와 연결
  - HTTP 는 연결 기반인 TCP 표준에 의존한다.

<br>

#### 3-1-2. HTTP 로 제어할 수 있는 것

<br>

- 캐시
- origin 제약사항 완화
- 인증
- 프록시와 터널링
- 세션

<br>

#### 3-1-3. HTTP 흐름

<br>

- 클라이언트가 서버와 통신하고자 할 때 수행되는 과정들
  1. TCP 연결이 열린다.
     - 클라이언트는 새 연결을 열거나, 기존 연결을 재사용하거나, 서버에 대한 여러 TCP 연결을 열 수 있다.
  2. HTTP 메세지를 전송한다.
  3. 서버에 의해 전송된 응답을 읽어온다.
  4. 연결을 닫거나 다른 요청들을 위해 재사용한다.

<br>

#### 3-1-4. HTTP 메세지

<br>

- HTTP request, response
  - request 구성 요소
    - 필요한 작업을 정의하는 GET, POST, OPTIONS, HEAD 같은 메서드
    - 가져오려는 리소스의 URL
    - HTTP 프로토콜의 버전
    - URL 매개변수
      - query 문자열을 통해 전송된 필드 값 쌍
    - [associated cookies](https://developer.mozilla.org/en-US/docs/Glossary/Cookie)

  - response 구성 요소
    - HTTP 프로토콜의 버전
    - 요청의 성공 여부와, 그 이유를 나타내는 [상태 코드](https://developer.mozilla.org/en-US/docs/Web/HTTP/Status)
    - 아무런 영향력이 없는, 상태 코드의 짧은 설명을 나타내는 상태 메시지
    - 요청 헤더와 비슷한, HTTP [헤더들](https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers)
    - 선택 사항으로, 가져온 리소스가 포함되는 본문

- 클라이언트
  - HTTP request
  - 오직 클라이언트만 HTTP 요청을 만들 수 있고 만든 요청은 오직 서버에게만 보낼 수 있다.
  - 서버는 오직 클라이언트의 HTTP 요청에만 응답할 수 있다.
  - 클라이언트가 HTTP 를 통해 파일을 요청할 때 반드시 URL 파일들을 제공해야 한다.
  - 웹 서버는 반드시 최소한의 에러 메세지를 포함하여 HTTP 요청에 응답해야 한다.

- 서버
  - HTTP response
  - HTTP 서버는 요청받은 URL 이 존재하는 파일과 매칭이 되는지를 확인한다.
    - 매칭된다면 그 파일 내용을 브라우저에게 되돌려준다.
    - 그렇지 않다면 필요한 파일을 구축한다.
  - 서버가 위 과정이 불가능하다면 에러 메세지를 반환한다.
    - 대부분 404 Not Found 에러이다.
    - 404 error pages 는 굉장히 많이 노출되기 때문에 따로 디자인하는 경우가 많다.

<br>

[위로 가기](#목차)

<br>

### 3-2. 웹 서버의 특징 및 종류

<br>

- 웹 서버의 특징
  - 항상 실행 중이다.
  - 항상 인터넷과 연결되어있다.
  - 항상 같은 IP 주소를 가지고 있다.
  - 제 3자에 의해 유지보수 된다.
  - HTTP 지원

- 정적 웹 서버
  - HTTP 서버가 있는 컴퓨터로 구성
  - 서버가 파일을 사용자의 브라우저에게 전송
  - 브라우저가 지정된 URL 에 HTTP get 요청을 보낼 때,
    - 서버는 파일 시스템에서 요청한 문서를 검색한다.
      - 문서와 [success status](https://developer.mozilla.org/ko/docs/Web/HTTP/Status#successful_responses) 를 포함한 HTTP 응답을 반환한다.
      - 혹은 error status 가 반환된다.

- 동적 웹 서버
  - 정적 웹 서버와 추가적인 소프트웨어로 구성
    - 일반적인 애플리케이션과 DB 등으로 구성

  - 필요할 때에 동적으로 응답 콘텐츠가 생성된다.
    - Amazon, Facebook 의 각 제품 또는 게시물에 대해 별도의 정적 페이지를 만드는 것은 비효율적이다.
    - HTML 은 기본적인 틀만 제공하고 틀의 내용물은 DB의 컨텐츠들로 채운다.
      - Amazon 의 상품이 판매 될 때, 재고 DB 를 갱신하여 표시할 수 있다.
      - 어떤 게시판의 글이 삭제될 때, 게시판 DB에서 삭제한 다음 다시 내용물을 채워서 보여주면 된다.
      - HTML 템플릿에 있는 자리 표시자에 DB에서 가져온 데이터를 넣어서 생성된다.

    - 효율적인 동작이 가능하다.

  - 개발자들은 일반적으로 web frameworks 를 이용하여 코드를 작성한다.


<br>

### 3-3. 클라이언트 측 프로그래밍

<br>

- 주 목적
  - 렌더링된 웹 페이지의 모양과 행동을 개선시키는 것
    - UI 구성요소 선택 및 스타일 지정
    - 레이아웃 만들기
    - 탐색
    - 양식 유효성 검사
- 사용되는 언어
  - HTML
  - CSS
  - JavaScript 등

<br>

### 3-4. 서버 측 프로그래밍

<br>

- 주 목적
  - 요청에 대하여 반환할 컨텐츠의 선택
    - 제출된 데이터 및 요청의 유효성 검사
    - 데이터 저장 및 검색을 위한 DB 사용
    - 필요한 올바른 데이터 전송
- 사용되는 언어
  - PHP
  - Python
  - Ruby
  - C#
  - JavaScript
  - Java 등
- 서버 측에서 할 수 있는 제어들
  - 정보를 DB에서 저장했다가 꺼내 쓰는 동작의 응용이다.
    - 자료의 효율적인 저장과 정보 전달
    - 맞춤형 사용자 경험
    - 권한에 따른 컨텐츠에 대한 접근 제한
    - 세션과 상태 저장
    - 알림과 대화
    - 정보 분석

<br>

[위로 가기](#목차)

<br>