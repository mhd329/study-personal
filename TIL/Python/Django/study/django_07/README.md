# 모델 폼 사용 흐름

<br>

1. 기초 세팅 완료
   - 서버를 돌릴 수 있는 상태까지
2. `settings.py` 에서 만든 앱을 등록한다.
3. 프로젝트 경로 하위의 `urls.py` 에서 해당 앱으로 오는 요청들은 `include` 를 통해 해당 앱에서 관리하도록 설정한다.
4. 해당 앱 하위에 `urls.py` 파일을 만든 다음 앱 이름을 설정하고 루트 페이지에 대한 경로와 렌더링할 뷰 함수를 지정해준다.
5. `views.py` 에서 루트 페이지를 렌더링 할 뷰 함수를 정의한다.
   1. `models.py` 에서 스키마를 설정한다.
   2. 마이그레이션 후 마이그레이트 까지 완료한다.
   3. 모델을 import 한 다음 인스턴스화 하여 `context` 에 포함시킨 다음 렌더링 함수에 포함시킨다.
6. 게시판의 루트 페이지가 잘 나오는 것을 확인한다.
7. 글쓰기 페이지를 만들기 위해 해당 페이지의 형식에 맞게 4번부터 6번 과정까지를 반복한다.
   - 뷰 함수는 루트 페이지와 다르게 정의한다
   - 모델 폼의 요청 전송 방식에 따라 작동 방식을 나눈다.
      1. GET 일 때는 모델 폼을 인스턴스화 한다.
      2. 공통과정이 진행된다.
      3. POST 일 때는 유효성 검증 여부에 따라 작동 방식을 나눈다.
         1. 기존의 모델 폼에 POST 요청에 담겨 있는 데이터를 상속시켜 인스턴스화 한다.
         2. 인스턴스화 된 객체를 `is_valid()` 메서드로 유효한지 검증하여 유효하다면 DB 에 저장한다.
         3. 리턴 후 리다이렉트 하여 나머지 과정이 진행되지 않도록 한다.
         4. 유효하지 않다면 해당 에러 정보를 담아 공통과정이 진행된다.
   - 공통과정 : `context` 에 포함시킨 다음 렌더링한다.
8. 업데이트 과정은 글쓰기 과정과 비슷하다.
   - 모델 폼의 요청 전송 방식에 따라 작동 방식을 나눈다.
     - id 로 구분된 하나의 데이터를 모델에서 인스턴스화 시킨다.
        - GET 일 때는 모델 폼에 인스턴스화 된 데이터를 상속시킨 다음 모델 폼을 인스턴스화 한다.
           - 공통과정으로 넘어간다.
        - POST 일 때는 유효성 검증 여부에 따라 작동 방식을 나눈다.
           1. 기존의 모델 폼에 아래의 두 가지를 상속시켜 인스턴스화 한다.
              1. POST 요청에 담겨 있는 데이터
              2. 인스턴스화 된 객체
           2. 인스턴스화 된 객체를 `is_valid()` 메서드로 유효한지 검증하여 유효하다면 DB 에 저장한다.
           3. 리턴 후 리다이렉트 하여 나머지 과정이 진행되지 않도록 한다.
           4. 유효하지 않다면 해당 에러 정보를 담아 공통과정이 진행된다.
     
     - 공통과정 : 객체를 `context` 에 포함시킨 다음 렌더링한다.